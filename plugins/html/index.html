<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="js/vue.min.js"></script>
    <script src="js/axios.min.js"></script>
    <title>CamPanel</title>
    <style>
        @media (max-width: 767px) {
            body {
                font-size: 16px;
            }

            .text-end {
                text-align: right !important;
            }
        }

        .navbar {
            background-color: #007BFF; /* Kolor belki */
            color: #FFFFFF; /* Kolor tekstu */
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-dark">
        <div class="container">
            <span class="navbar-brand mb-0 h1">CamPanel</span>
        </div>
    </nav>

    <div class="container mt-3" id="app">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Parameter</th>
                    <th>Value</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>White Water Level</td>
                    <td class="text-end">$Vue{waterLevel.whiteWaterLevel}%</td>
                </tr>
                <tr>
                    <td>Grey Water Level</td>
                    <td class="text-end">$Vue{waterLevel.greyWaterLevel}%</td>
                </tr>
                <tr>
                    <td>Total Voltage</td>
                    <td class="text-end">$Vue{bms.totalVoltage}V</td>
                </tr>
                <tr>
                    <td>Current Amper</td>
                    <td class="text-end">$Vue{bms.currentAmper}A</td>
                </tr>
                <tr>
                    <td>RSOC</td>
                    <td class="text-end">$Vue{bms.RSOC}%</td>
                </tr>
            </tbody>
        </table>
    </div>
    <script>
        new Vue({
            el: '#app',
            data: {
                waterLevel: {},
                bms: {}
            },
            delimiters: ['$Vue{', '}'],
            methods: {
                saveRsoc: function() {
                    const dataToSend = {
                        rsoc: this.bms.RSOC
                    };
    
                    axios.get('/set', { params: dataToSend })
                        .then(response => {
                            console.log('Response from server:', response.data);
                        })
                        .catch(error => {
                            console.error('Error:', error);
                        });
                },
                updateRsoc: function(event) {
                    this.bms.RSOC = event.target.value;
                },
                fetchData: async function() {
                    try {
                        const response = await axios.get('/getData');
                        this.waterLevel = response.data.waterLevel;
                        this.bms = response.data.bms;
                    } catch (error) {
                        console.error('Error:', error);
                    }
                }
            },
            mounted: function() {
                this.fetchData();
                setInterval(this.fetchData, 2000);
            }
        });
    </script>
</body>
</html>